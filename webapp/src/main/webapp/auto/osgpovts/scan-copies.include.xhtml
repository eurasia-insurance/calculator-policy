<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:comp="http://xmlns.jcp.org/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

	<p:accordionPanel value="#{osgpovtsView.policy.insuredDrivers}"
		var="driver">
		<p:tab title="#{driver.displayName}">

			<p:panel header="#{glb['label.identity-card-data.scan-files']}"
				id="identityCardGalleria" styleClass="ui-glr">
				<p:remoteCommand name="rc_NewIdentityCardUploaded#{driver.safeId}"
					action="#{osgpovtsView.onDriverIdentityCardImageUploaded(driver)}"
					process="@this" update="@this, identityCardGalleria" />
				<ui:repeat var="image" value="#{driver.identityCardData.scanFiles}">
					<p:commandLink
						action="#{osgpovtsView.removeDriverIdentityCardImage(driver, image)}"
						ajax="true" process="@this"
						update="@this, @form(identityCardGalleria)">
						<p:graphicImage value="#{uploadedImageService.content}"
							styleClass="ui-glr-item ui-widget-content">
							<f:param name="id" value="#{image.id}" />
						</p:graphicImage>
					</p:commandLink>
				</ui:repeat>
				<p:fileUpload mode="advanced"
					label="#{glb['label.command.add-image']}"
					allowTypes="/(\.|\/)(gif|jpe?g|png)$/" multiple="true"
					sizeLimit="1000000" fileLimit="10" skinSimple="true" auto="true"
					fileUploadListener="#{uploadedImageService.onImageUpload}"
					oncomplete="rc_NewIdentityCardUploaded#{driver.safeId}()" />
			</p:panel>

			<p:panel header="#{gpovts['label.driver-license-data.scan-files']}"
				id="driverLicenseGalleria" styleClass="ui-glr">
				<p:remoteCommand name="rc_NewDriverLicenseUploaded#{driver.safeId}"
					action="#{osgpovtsView.onDriverLicenseImageUploaded(driver)}"
					process="@this" update="@this, driverLicenseGalleria" />
				<ui:repeat var="image" value="#{driver.driverLicenseData.scanFiles}">
					<p:commandLink
						action="#{osgpovtsView.removeDriverLicenseImage(driver, image)}"
						ajax="true" process="@this"
						update="@this, @form(driverLicenseGalleria)">
						<p:graphicImage value="#{uploadedImageService.content}"
							styleClass="ui-glr-item ui-widget-content">
							<f:param name="id" value="#{image.id}" />
						</p:graphicImage>
					</p:commandLink>
				</ui:repeat>
				<p:fileUpload mode="advanced"
					label="#{glb['label.command.add-image']}"
					allowTypes="/(\.|\/)(gif|jpe?g|png)$/" multiple="true"
					sizeLimit="1000000" fileLimit="10" skinSimple="true" auto="true"
					fileUploadListener="#{uploadedImageService.onImageUpload}"
					oncomplete="rc_NewDriverLicenseUploaded#{driver.safeId}()">
				</p:fileUpload>
			</p:panel>

			<p:panel
				header="#{gpovts['label.privileges.handicaped-certificate.scan-files']}"
				rendered="#{driver.handicaped}" id="handicapedCertificateGalleria"
				styleClass="ui-glr">
				<p:remoteCommand
					name="rc_NewHandicapedCertificateUploaded#{driver.safeId}"
					action="#{osgpovtsView.onHandicapedCertificateImageUploaded(driver)}"
					process="@this" update="@this, handicapedCertificateGalleria" />
				<ui:repeat var="image"
					value="#{driver.handicapedCertificateData.scanFiles}">
					<p:commandLink
						action="#{osgpovtsView.removeHandicapedCertificateImage(driver, image)}"
						ajax="true" process="@this"
						update="@this, @form(handicapedCertificateGalleria)">
						<p:graphicImage value="#{uploadedImageService.content}"
							styleClass="ui-glr-item ui-widget-content">
							<f:param name="id" value="#{image.id}" />
						</p:graphicImage>
					</p:commandLink>
				</ui:repeat>
				<p:fileUpload mode="advanced"
					label="#{glb['label.command.add-image']}"
					allowTypes="/(\.|\/)(gif|jpe?g|png)$/" multiple="true"
					sizeLimit="1000000" fileLimit="10" skinSimple="true" auto="true"
					fileUploadListener="#{uploadedImageService.onImageUpload}"
					oncomplete="rc_NewHandicapedCertificateUploaded#{driver.safeId}()">
				</p:fileUpload>
			</p:panel>

			<p:panel
				header="#{gpovts['label.privileges.gpw-participant-certificate.scan-files']}"
				rendered="#{driver.gpwParticipant}"
				id="gpwParticipantCertificateGalleria" styleClass="ui-glr">
				<p:remoteCommand
					name="rc_NewGPWParticipantCertificateUploaded#{driver.safeId}"
					action="#{osgpovtsView.onGPWParticipantCertificateImageUploaded(driver)}"
					process="@this" update="@this, gpwParticipantCertificateGalleria" />
				<ui:repeat var="image"
					value="#{driver.gpwParticipantCertificateData.scanFiles}">
					<p:commandLink
						action="#{osgpovtsView.removeGPWParticipantCertificateImage(driver, image)}"
						ajax="true" process="@this"
						update="@this, @form(gpwParticipantCertificateGalleria)">
						<p:graphicImage value="#{uploadedImageService.content}"
							styleClass="ui-glr-item ui-widget-content">
							<f:param name="id" value="#{image.id}" />
						</p:graphicImage>
					</p:commandLink>
				</ui:repeat>
				<p:fileUpload mode="advanced"
					label="#{glb['label.command.add-image']}"
					allowTypes="/(\.|\/)(gif|jpe?g|png)$/" multiple="true"
					sizeLimit="1000000" fileLimit="10" skinSimple="true" auto="true"
					fileUploadListener="#{uploadedImageService.onImageUpload}"
					oncomplete="rc_NewGPWParticipantCertificateUploaded#{driver.safeId}()">
				</p:fileUpload>
			</p:panel>

			<p:panel
				header="#{gpovts['label.privileges.pensioner-certificate.scan-files']}"
				rendered="#{driver.pensioner}" id="pensionerCertificateGalleria"
				styleClass="ui-glr">
				<p:remoteCommand
					name="rc_NewPensionerCertificateUploaded#{driver.safeId}"
					action="#{osgpovtsView.onPensionerCertificateImageUploaded(driver)}"
					process="@this" update="@this, pensionerCertificateGalleria" />
				<ui:repeat var="image"
					value="#{driver.pensionerCertificateData.scanFiles}">
					<p:commandLink
						action="#{osgpovtsView.removePensionerCertificateImage(driver, image)}"
						ajax="true" process="@this"
						update="@this, @form(pensionerCertificateGalleria)">
						<p:graphicImage value="#{uploadedImageService.content}"
							styleClass="ui-glr-item ui-widget-content">
							<f:param name="id" value="#{image.id}" />
						</p:graphicImage>
					</p:commandLink>
				</ui:repeat>
				<p:fileUpload mode="advanced"
					label="#{glb['label.command.add-image']}"
					allowTypes="/(\.|\/)(gif|jpe?g|png)$/" multiple="true"
					sizeLimit="1000000" fileLimit="10" skinSimple="true" auto="true"
					fileUploadListener="#{uploadedImageService.onImageUpload}"
					oncomplete="rc_NewPensionerCertificateUploaded#{driver.safeId}()">
				</p:fileUpload>
			</p:panel>

			<p:panel
				header="#{gpovts['label.privileges.privileger-certificate.scan-files']}"
				rendered="#{driver.priveleger}" id="privilegerCertificateGalleria"
				styleClass="ui-glr">
				<p:remoteCommand
					name="rc_NewPrivilegerCertificateUploaded#{driver.safeId}"
					action="#{osgpovtsView.onPrivilegerCertificateImageUploaded(driver)}"
					process="@this" update="@this, privilegerCertificateGalleria" />
				<ui:repeat var="image"
					value="#{driver.privilegerCertificateData.scanFiles}">
					<p:commandLink
						action="#{osgpovtsView.removePrivilegerCertificateImage(driver, image)}"
						ajax="true" process="@this"
						update="@this, @form(privilegerCertificateGalleria)">
						<p:graphicImage value="#{uploadedImageService.content}"
							styleClass="ui-glr-item ui-widget-content">
							<f:param name="id" value="#{image.id}" />
						</p:graphicImage>
					</p:commandLink>
				</ui:repeat>
				<p:fileUpload mode="advanced"
					label="#{glb['label.command.add-image']}"
					allowTypes="/(\.|\/)(gif|jpe?g|png)$/" multiple="true"
					sizeLimit="1000000" fileLimit="10" skinSimple="true" auto="true"
					fileUploadListener="#{uploadedImageService.onImageUpload}"
					oncomplete="rc_NewPrivilegerCertificateUploaded#{driver.safeId}()">
				</p:fileUpload>
			</p:panel>


		</p:tab>
	</p:accordionPanel>

</ui:composition>