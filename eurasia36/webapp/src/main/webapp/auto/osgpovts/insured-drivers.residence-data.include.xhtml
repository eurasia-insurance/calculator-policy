<ui:composition xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:comp="http://xmlns.jcp.org/jsf/composite"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

	<p:panel header="#{glb['label.residence-data']}">
		<h:panelGrid columns="2">
			<p:outputLabel value="#{glb['label.residence-data.city']}" />
			<p:outputLabel value="#{glb['label.residence-data.address']}" />
			<h:panelGrid columns="2">
				<p:selectOneMenu id="city" value="#{driver.residenceData.city}"
					filter="true" filterMatchMode="contains" var="c">
					<f:selectItems value="#{kzCityService.selectableItemsSI}" />
					<p:column>
						<h:outputText value="#{c}" />
					</p:column>
					<p:column>
						<h:outputText value="#{c.rusname}" />
					</p:column>
					<p:ajax event="change" process="@this"
						update="@this,currentDriverPanel" />
				</p:selectOneMenu>
				<p:message for="city" display="icon" />
			</h:panelGrid>
			<h:panelGrid columns="2">
				<p:inputText id="address" value="#{driver.residenceData.address}">
					<p:ajax event="change" process="@this"
						update="@this,currentDriverPanel" />
				</p:inputText>
				<p:message for="address" display="icon" />
			</h:panelGrid>
		</h:panelGrid>

		<p:selectBooleanCheckbox widgetVar="w_isResident#{driver.safeId}"
			value="#{driver.residenceData.resident}">
			<p:ajax event="change" process="@this"
				update="@this,currentDriverPanel" />
		</p:selectBooleanCheckbox>
		<p:outputLabel value="#{glb['label.residence-data.is-resident']}"
			onclick="PF('w_isResident#{driver.safeId}').toggle()" />

		<h:panelGrid columns="1"
			rendered="#{not driver.residenceData.resident}">
			<p:outputLabel value="#{glb['label.origin-data.country']}" />
			<h:panelGrid columns="2">
				<p:selectOneMenu id="country" value="#{driver.originData.country}"
					filter="true" filterMatchMode="contains" var="c">
					<f:selectItems value="#{countryService.selectableItemsSI}" />
					<p:column>
						<h:outputText value="#{c}" />
					</p:column>
					<p:column>
						<h:outputText value="#{c.isoCode}" />
					</p:column>
					<p:column>
						<h:outputText value="#{c.rusname}" />
					</p:column>
					<p:ajax event="change" process="@this"
						update="@this,currentDriverPanel" />
				</p:selectOneMenu>
				<p:message for="country" display="icon" />
			</h:panelGrid>
		</h:panelGrid>
	</p:panel>

</ui:composition>